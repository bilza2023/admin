import{s as y,a as b,q as c,g as k,i as p,f as d,r as F}from"../chunks/scheduler.D5E9w3yW.js";import{S as j,i as A,c as _,a as $,m as h,t as l,b as m,d as S,e as P,g as N}from"../chunks/index.XwPOAcCG.js";import{A as I}from"../chunks/index.3rfbx_ts.js";import{t as M}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.C9vMY6QJ.js";import{l as O,A as R}from"../chunks/getCanvasSlideImages.D4FM3-19.js";import{P as U}from"../chunks/Player.Cq46A-Gl.js";import{g as q}from"../chunks/getPresentationImages.C6N63fwN.js";import{P as E}from"../chunks/ProjectToolbar.CaAMs4g9.js";import{a as L}from"../chunks/ajaxGet.NB-3tkvm.js";function g(a){let t,r;return t=new U({props:{slides:a[0],assets:a[1],soundFileName:a[2]}}),{c(){_(t.$$.fragment)},l(o){$(t.$$.fragment,o)},m(o,n){h(t,o,n),r=!0},p(o,n){const e={};n&1&&(e.slides=o[0]),n&2&&(e.assets=o[1]),n&4&&(e.soundFileName=o[2]),t.$set(e)},i(o){r||(l(t.$$.fragment,o),r=!0)},o(o){m(t.$$.fragment,o),r=!1},d(o){P(t,o)}}}function B(a){let t,r,o,n;t=new E({});let e=a[0]&&a[1]&&a[2]&&g(a);return{c(){_(t.$$.fragment),r=b(),e&&e.c(),o=c()},l(s){$(t.$$.fragment,s),r=k(s),e&&e.l(s),o=c()},m(s,i){h(t,s,i),p(s,r,i),e&&e.m(s,i),p(s,o,i),n=!0},p(s,[i]){s[0]&&s[1]&&s[2]?e?(e.p(s,i),i&7&&l(e,1)):(e=g(s),e.c(),l(e,1),e.m(o.parentNode,o)):e&&(N(),m(e,1,1,()=>{e=null}),S())},i(s){n||(l(t.$$.fragment,s),l(e),n=!0)},o(s){m(t.$$.fragment,s),m(e),n=!1},d(s){s&&(d(r),d(o)),P(t,s),e&&e.d(s)}}}let C="/images/";function D(a){return a.slice().sort((t,r)=>t.sortOrder-r.sortOrder)}async function G(a){const t="/sounds/"+a+".opus";try{return(await fetch(t,{method:"HEAD"})).ok?t:"/sounds/music.opus"}catch{return"/sounds/music.opus"}}function H(a,t,r){let o=null,n=null,e=["atom.png","baloons.png","activity1.jpg","drops.png"],s=null;return F(async()=>{try{const i=new URLSearchParams(location.search).get("id"),u=await L(`${I}/presentation/read/${i}`);if(u.ok){let f=await u.json();e=q(f.slides);const w=await O(e,C);r(1,n=new R(w)),r(0,o=D(f.slides)),r(2,s=await G(f.filename))}else console.error("Failed to fetch presentation"),M.push("Failed to load presentation.")}catch(i){console.error("Error during onMount:",i)}}),[o,n,s]}class Y extends j{constructor(t){super(),A(this,t,H,B,y,{})}}export{Y as component};
