import{s as X,e as y,a as I,a2 as Ce,c as T,f as m,g as P,b as E,m as v,h as $,i as k,t as L,d as A,j as B,X as Ve,Y as Le,v as j,n as Z,q as U,o as H,p as Q,Z as x,A as Ae,r as M,a3 as R}from"../chunks/scheduler.DnLb9Fkb.js";import{S as F,i as J,t as _,g as S,a as b,e as w,c as N,b as D,m as C,d as V,o as W}from"../chunks/index.BredBVVQ.js";import{K as Y,P as ze,S as Oe,a as Be,A as Xe,g as Fe}from"../chunks/getPresentationImages.BrudJTEZ.js";import{t as Je}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.BL1B9bqS.js";import{l as Ue,A as He}from"../chunks/getCanvasSlideImages.D4FM3-19.js";import{C as Ge}from"../chunks/CanvasPlayer.BrJTUx1s.js";import{e as z}from"../chunks/each.Buk2UDII.js";import{P as Ke}from"../chunks/ProjectToolbar.CyIfI1i-.js";function ee(f){let t,s;return t=new Y({props:{$$slots:{default:[Me]},$$scope:{ctx:f}}}),{c(){N(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,l){C(t,e,l),s=!0},p(e,l){const i={};l&3&&(i.$$scope={dirty:l,ctx:e}),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){V(t,e)}}}function Me(f){let t=f[0].code+"",s;return{c(){s=L(t)},l(e){s=A(e,t)},m(e,l){k(e,s,l)},p(e,l){l&1&&t!==(t=e[0].code+"")&&B(s,t)},d(e){e&&m(s)}}}function te(f){let t,s=f[0].code+"",e;return{c(){t=y("p"),e=L(s),this.h()},l(l){t=T(l,"P",{class:!0});var i=E(t);e=A(i,s),i.forEach(m),this.h()},h(){v(t,"class","text-class svelte-1inyj3r")},m(l,i){k(l,t,i),$(t,e)},p(l,i){i&1&&s!==(s=l[0].code+"")&&B(e,s)},d(l){l&&m(t)}}}function le(f){let t,s=f[0].code+"",e;return{c(){t=y("h1"),e=L(s),this.h()},l(l){t=T(l,"H1",{class:!0});var i=E(t);e=A(i,s),i.forEach(m),this.h()},h(){v(t,"class","heading svelte-1inyj3r")},m(l,i){k(l,t,i),$(t,e)},p(l,i){i&1&&s!==(s=l[0].code+"")&&B(e,s)},d(l){l&&m(t)}}}function se(f){let t,s,e=f[0].code+"";return{c(){t=y("div"),s=new Ve(!1),this.h()},l(l){t=T(l,"DIV",{class:!0});var i=E(t);s=Le(i,!1),i.forEach(m),this.h()},h(){s.a=null,v(t,"class","svelte-1inyj3r")},m(l,i){k(l,t,i),s.m(e,t)},p(l,i){i&1&&e!==(e=l[0].code+"")&&s.p(e)},d(l){l&&m(t)}}}function Re(f){let t,s,e,l,i,n,r,a=(f[0].type==null||f[0].type=="code"||f[0].type=="")&&ee(f),o=(f[0].type=="txt"||f[0].type=="text")&&te(f),c=(f[0].type=="hdg"||f[0].type=="heading")&&le(f),g=f[0].type=="html"&&se(f);return{c(){t=y("link"),s=I(),e=y("div"),a&&a.c(),l=I(),o&&o.c(),i=I(),c&&c.c(),n=I(),g&&g.c(),this.h()},l(u){const h=Ce("svelte-1r6gjw5",document.head);t=T(h,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),h.forEach(m),s=P(u),e=T(u,"DIV",{class:!0});var d=E(e);a&&a.l(d),l=P(d),o&&o.l(d),i=P(d),c&&c.l(d),n=P(d),g&&g.l(d),d.forEach(m),this.h()},h(){v(t,"rel","stylesheet"),v(t,"href","https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"),v(t,"integrity","sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn"),v(t,"crossorigin","anonymous"),v(e,"class","eq-display svelte-1inyj3r")},m(u,h){$(document.head,t),k(u,s,h),k(u,e,h),a&&a.m(e,null),$(e,l),o&&o.m(e,null),$(e,i),c&&c.m(e,null),$(e,n),g&&g.m(e,null),r=!0},p(u,[h]){u[0].type==null||u[0].type=="code"||u[0].type==""?a?(a.p(u,h),h&1&&_(a,1)):(a=ee(u),a.c(),_(a,1),a.m(e,l)):a&&(S(),b(a,1,1,()=>{a=null}),w()),u[0].type=="txt"||u[0].type=="text"?o?o.p(u,h):(o=te(u),o.c(),o.m(e,i)):o&&(o.d(1),o=null),u[0].type=="hdg"||u[0].type=="heading"?c?c.p(u,h):(c=le(u),c.c(),c.m(e,n)):c&&(c.d(1),c=null),u[0].type=="html"?g?g.p(u,h):(g=se(u),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i(u){r||(_(a),r=!0)},o(u){b(a),r=!1},d(u){u&&(m(s),m(e)),m(t),a&&a.d(),o&&o.d(),c&&c.d(),g&&g.d()}}}function We(f,t,s){let{eq:e}=t;return f.$$set=l=>{"eq"in l&&s(0,e=l.eq)},[e]}class Ye extends F{constructor(t){super(),J(this,t,We,Re,X,{eq:0})}}function ie(f,t,s){const e=f.slice();return e[2]=t[s],e[4]=s,e}function ne(f,t,s){const e=f.slice();return e[5]=t[s],e[7]=s,e}function re(f){let t,s=z(f[0]),e=[];for(let l=0;l<s.length;l+=1)e[l]=ae(ie(f,s,l));return{c(){t=y("table");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=T(l,"TABLE",{class:!0});var i=E(t);for(let n=0;n<e.length;n+=1)e[n].l(i);i.forEach(m),this.h()},h(){v(t,"class","table svelte-19jhn9o")},m(l,i){k(l,t,i);for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(t,null)},p(l,i){if(i&1){s=z(l[0]);let n;for(n=0;n<s.length;n+=1){const r=ie(l,s,n);e[n]?e[n].p(r,i):(e[n]=ae(r),e[n].c(),e[n].m(t,null))}for(;n<e.length;n+=1)e[n].d(1);e.length=s.length}},d(l){l&&m(t),H(e,l)}}}function fe(f){let t,s=f[5]+"",e;return{c(){t=y("td"),e=L(s),this.h()},l(l){t=T(l,"TD",{class:!0});var i=E(t);e=A(i,s),i.forEach(m),this.h()},h(){v(t,"class","cell svelte-19jhn9o")},m(l,i){k(l,t,i),$(t,e)},p(l,i){i&1&&s!==(s=l[5]+"")&&B(e,s)},d(l){l&&m(t)}}}function ae(f){let t,s,e=z(f[2]),l=[];for(let i=0;i<e.length;i+=1)l[i]=fe(ne(f,e,i));return{c(){t=y("tr");for(let i=0;i<l.length;i+=1)l[i].c();s=I(),this.h()},l(i){t=T(i,"TR",{class:!0});var n=E(t);for(let r=0;r<l.length;r+=1)l[r].l(n);s=P(n),n.forEach(m),this.h()},h(){v(t,"class","")},m(i,n){k(i,t,n);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,null);$(t,s)},p(i,n){if(n&1){e=z(i[2]);let r;for(r=0;r<e.length;r+=1){const a=ne(i,e,r);l[r]?l[r].p(a,n):(l[r]=fe(a),l[r].c(),l[r].m(t,s))}for(;r<l.length;r+=1)l[r].d(1);l.length=e.length}},d(i){i&&m(t),H(l,i)}}}function Ze(f){let t,s=f[0].length>0&&re(f);return{c(){s&&s.c(),t=j()},l(e){s&&s.l(e),t=j()},m(e,l){s&&s.m(e,l),k(e,t,l)},p(e,[l]){e[0].length>0?s?s.p(e,l):(s=re(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i:Z,o:Z,d(e){e&&m(t),s&&s.d(e)}}}function Qe(f,t,s){let{code:e}=t,l=[];return U(()=>{s(0,l=JSON.parse(e))}),f.$$set=i=>{"code"in i&&s(1,e=i.code)},f.$$.update=()=>{f.$$.dirty&2&&s(0,l=JSON.parse(e))},[l,e]}class xe extends F{constructor(t){super(),J(this,t,Qe,Ze,X,{code:1})}}function oe(f,t,s){const e=f.slice();return e[2]=t[s],e[4]=s,e}function ce(f,t,s){const e=f.slice();return e[5]=t[s],e[7]=s,e}function ue(f){let t,s,e,l=z(f[0]),i=[];for(let r=0;r<l.length;r+=1)i[r]=de(oe(f,l,r));const n=r=>b(i[r],1,1,()=>{i[r]=null});return{c(){t=y("div"),s=y("table");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){t=T(r,"DIV",{class:!0});var a=E(t);s=T(a,"TABLE",{class:!0});var o=E(s);for(let c=0;c<i.length;c+=1)i[c].l(o);o.forEach(m),a.forEach(m),this.h()},h(){v(s,"class","table svelte-mhqs4c"),v(t,"class","table-wrapper svelte-mhqs4c")},m(r,a){k(r,t,a),$(t,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(s,null);e=!0},p(r,a){if(a&1){l=z(r[0]);let o;for(o=0;o<l.length;o+=1){const c=oe(r,l,o);i[o]?(i[o].p(c,a),_(i[o],1)):(i[o]=de(c),i[o].c(),_(i[o],1),i[o].m(s,null))}for(S(),o=l.length;o<i.length;o+=1)n(o);w()}},i(r){if(!e){for(let a=0;a<l.length;a+=1)_(i[a]);e=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)b(i[a]);e=!1},d(r){r&&m(t),H(i,r)}}}function et(f){let t=f[5]+"",s;return{c(){s=L(t)},l(e){s=A(e,t)},m(e,l){k(e,s,l)},p(e,l){l&1&&t!==(t=e[5]+"")&&B(s,t)},d(e){e&&m(s)}}}function me(f){let t,s,e;return s=new Y({props:{$$slots:{default:[et]},$$scope:{ctx:f}}}),{c(){t=y("td"),N(s.$$.fragment),this.h()},l(l){t=T(l,"TD",{class:!0});var i=E(t);D(s.$$.fragment,i),i.forEach(m),this.h()},h(){v(t,"class","cell svelte-mhqs4c")},m(l,i){k(l,t,i),C(s,t,null),e=!0},p(l,i){const n={};i&257&&(n.$$scope={dirty:i,ctx:l}),s.$set(n)},i(l){e||(_(s.$$.fragment,l),e=!0)},o(l){b(s.$$.fragment,l),e=!1},d(l){l&&m(t),V(s)}}}function de(f){let t,s,e,l=z(f[2]),i=[];for(let r=0;r<l.length;r+=1)i[r]=me(ce(f,l,r));const n=r=>b(i[r],1,1,()=>{i[r]=null});return{c(){t=y("tr");for(let r=0;r<i.length;r+=1)i[r].c();s=I()},l(r){t=T(r,"TR",{});var a=E(t);for(let o=0;o<i.length;o+=1)i[o].l(a);s=P(a),a.forEach(m)},m(r,a){k(r,t,a);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null);$(t,s),e=!0},p(r,a){if(a&1){l=z(r[2]);let o;for(o=0;o<l.length;o+=1){const c=ce(r,l,o);i[o]?(i[o].p(c,a),_(i[o],1)):(i[o]=me(c),i[o].c(),_(i[o],1),i[o].m(t,s))}for(S(),o=l.length;o<i.length;o+=1)n(o);w()}},i(r){if(!e){for(let a=0;a<l.length;a+=1)_(i[a]);e=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)b(i[a]);e=!1},d(r){r&&m(t),H(i,r)}}}function tt(f){let t,s,e,l,i=f[0].length>0&&ue(f);return{c(){t=y("link"),s=I(),i&&i.c(),e=j(),this.h()},l(n){const r=Ce("svelte-mxwxpt",document.head);t=T(r,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),r.forEach(m),s=P(n),i&&i.l(n),e=j(),this.h()},h(){v(t,"rel","stylesheet"),v(t,"href","https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"),v(t,"integrity","sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn"),v(t,"crossorigin","anonymous")},m(n,r){$(document.head,t),k(n,s,r),i&&i.m(n,r),k(n,e,r),l=!0},p(n,[r]){n[0].length>0?i?(i.p(n,r),r&1&&_(i,1)):(i=ue(n),i.c(),_(i,1),i.m(e.parentNode,e)):i&&(S(),b(i,1,1,()=>{i=null}),w())},i(n){l||(_(i),l=!0)},o(n){b(i),l=!1},d(n){n&&(m(s),m(e)),m(t),i&&i.d(n)}}}function lt(f,t,s){let{code:e}=t,l=[];return U(()=>{s(0,l=JSON.parse(e)),console.log(l)}),f.$$set=i=>{"code"in i&&s(1,e=i.code)},f.$$.update=()=>{f.$$.dirty&2&&s(0,l=JSON.parse(e))},[l,e]}class st extends F{constructor(t){super(),J(this,t,lt,tt,X,{code:1})}}function he(f){let t,s=f[0].code+"",e;return{c(){t=y("p"),e=L(s),this.h()},l(l){t=T(l,"P",{class:!0});var i=E(t);e=A(i,s),i.forEach(m),this.h()},h(){v(t,"class","text-box svelte-mjszi8")},m(l,i){k(l,t,i),$(t,e)},p(l,i){i&1&&s!==(s=l[0].code+"")&&B(e,s)},d(l){l&&m(t)}}}function _e(f){let t,s,e;return s=new Y({props:{$$slots:{default:[it]},$$scope:{ctx:f}}}),{c(){t=y("div"),N(s.$$.fragment),this.h()},l(l){t=T(l,"DIV",{class:!0});var i=E(t);D(s.$$.fragment,i),i.forEach(m),this.h()},h(){v(t,"class","code-box svelte-mjszi8")},m(l,i){k(l,t,i),C(s,t,null),e=!0},p(l,i){const n={};i&5&&(n.$$scope={dirty:i,ctx:l}),s.$set(n)},i(l){e||(_(s.$$.fragment,l),e=!0)},o(l){b(s.$$.fragment,l),e=!1},d(l){l&&m(t),V(s)}}}function it(f){let t=f[0].code+"",s;return{c(){s=L(t)},l(e){s=A(e,t)},m(e,l){k(e,s,l)},p(e,l){l&1&&t!==(t=e[0].code+"")&&B(s,t)},d(e){e&&m(s)}}}function ge(f){let t,s=(f[0].type==="img"||f[0].type==="image")&&pe(f);return{c(){s&&s.c(),t=j()},l(e){s&&s.l(e),t=j()},m(e,l){s&&s.m(e,l),k(e,t,l)},p(e,l){e[0].type==="img"||e[0].type==="image"?s?s.p(e,l):(s=pe(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){e&&m(t),s&&s.d(e)}}}function pe(f){let t,s;function e(n,r){return r&3&&(s=null),s==null&&(s=!!(n[1].images.has(n[0].code)&&n[1].images.get(n[0].code).img.src)),s?rt:nt}let l=e(f,-1),i=l(f);return{c(){t=y("div"),i.c(),this.h()},l(n){t=T(n,"DIV",{class:!0});var r=E(t);i.l(r),r.forEach(m),this.h()},h(){v(t,"class","image-box svelte-mjszi8")},m(n,r){k(n,t,r),i.m(t,null)},p(n,r){l===(l=e(n,r))&&i?i.p(n,r):(i.d(1),i=l(n),i&&(i.c(),i.m(t,null)))},d(n){n&&m(t),i.d()}}}function nt(f){let t,s,e=f[0].code+"",l,i;return{c(){t=y("p"),s=L("Image "),l=L(e),i=L(" not found.")},l(n){t=T(n,"P",{});var r=E(t);s=A(r,"Image "),l=A(r,e),i=A(r," not found."),r.forEach(m)},m(n,r){k(n,t,r),$(t,s),$(t,l),$(t,i)},p(n,r){r&1&&e!==(e=n[0].code+"")&&B(l,e)},d(n){n&&m(t)}}}function rt(f){let t,s,e;return{c(){t=y("img"),this.h()},l(l){t=T(l,"IMG",{src:!0,alt:!0}),this.h()},h(){Q(t.src,s=f[1].images.get(f[0].code).img.src)||v(t,"src",s),v(t,"alt",e=f[0].code)},m(l,i){k(l,t,i)},p(l,i){i&3&&!Q(t.src,s=l[1].images.get(l[0].code).img.src)&&v(t,"src",s),i&1&&e!==(e=l[0].code)&&v(t,"alt",e)},d(l){l&&m(t)}}}function be(f){let t,s;return t=new xe({props:{code:f[0].code}}),{c(){N(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,l){C(t,e,l),s=!0},p(e,l){const i={};l&1&&(i.code=e[0].code),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){V(t,e)}}}function ve(f){let t,s;return t=new st({props:{code:f[0].code}}),{c(){N(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,l){C(t,e,l),s=!0},p(e,l){const i={};l&1&&(i.code=e[0].code),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){V(t,e)}}}function ke(f){let t,s,e=f[0].code+"",l;return{c(){t=y("div"),s=y("div"),l=L(e),this.h()},l(i){t=T(i,"DIV",{class:!0});var n=E(t);s=T(n,"DIV",{class:!0});var r=E(s);l=A(r,e),r.forEach(m),n.forEach(m),this.h()},h(){v(s,"class","heading-inner svelte-mjszi8"),v(t,"class","heading-box svelte-mjszi8")},m(i,n){k(i,t,n),$(t,s),$(s,l)},p(i,n){n&1&&e!==(e=i[0].code+"")&&B(l,e)},d(i){i&&m(t)}}}function ft(f){let t,s,e,l,i,n,r,a=(f[0].type==null||f[0].type=="txt"||f[0].type=="text")&&he(f),o=f[0].type=="code"&&_e(f),c=f[1]&&ge(f),g=(f[0].type=="table"||f[0].type=="tbl")&&be(f),u=f[0].type=="tableCode"&&ve(f),h=(f[0].type=="heading"||f[0].type=="hdg")&&ke(f);return{c(){t=y("div"),a&&a.c(),s=I(),o&&o.c(),e=I(),c&&c.c(),l=I(),g&&g.c(),i=I(),u&&u.c(),n=I(),h&&h.c(),this.h()},l(d){t=T(d,"DIV",{class:!0});var p=E(t);a&&a.l(p),s=P(p),o&&o.l(p),e=P(p),c&&c.l(p),l=P(p),g&&g.l(p),i=P(p),u&&u.l(p),n=P(p),h&&h.l(p),p.forEach(m),this.h()},h(){v(t,"class","eq-display svelte-mjszi8")},m(d,p){k(d,t,p),a&&a.m(t,null),$(t,s),o&&o.m(t,null),$(t,e),c&&c.m(t,null),$(t,l),g&&g.m(t,null),$(t,i),u&&u.m(t,null),$(t,n),h&&h.m(t,null),r=!0},p(d,[p]){d[0].type==null||d[0].type=="txt"||d[0].type=="text"?a?a.p(d,p):(a=he(d),a.c(),a.m(t,s)):a&&(a.d(1),a=null),d[0].type=="code"?o?(o.p(d,p),p&1&&_(o,1)):(o=_e(d),o.c(),_(o,1),o.m(t,e)):o&&(S(),b(o,1,1,()=>{o=null}),w()),d[1]?c?c.p(d,p):(c=ge(d),c.c(),c.m(t,l)):c&&(c.d(1),c=null),d[0].type=="table"||d[0].type=="tbl"?g?(g.p(d,p),p&1&&_(g,1)):(g=be(d),g.c(),_(g,1),g.m(t,i)):g&&(S(),b(g,1,1,()=>{g=null}),w()),d[0].type=="tableCode"?u?(u.p(d,p),p&1&&_(u,1)):(u=ve(d),u.c(),_(u,1),u.m(t,n)):u&&(S(),b(u,1,1,()=>{u=null}),w()),d[0].type=="heading"||d[0].type=="hdg"?h?h.p(d,p):(h=ke(d),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},i(d){r||(_(o),_(g),_(u),r=!0)},o(d){b(o),b(g),b(u),r=!1},d(d){d&&m(t),a&&a.d(),o&&o.d(),c&&c.d(),g&&g.d(),u&&u.d(),h&&h.d()}}}function at(f,t,s){let{eq:e}=t,{assets:l}=t;return U(async()=>{console.log("assets",l.images.get("baloons.png").img)}),f.$$set=i=>{"eq"in i&&s(0,e=i.eq),"assets"in i&&s(1,l=i.assets)},[e,l]}class ot extends F{constructor(t){super(),J(this,t,at,ft,X,{eq:0,assets:1})}}function ye(f,t,s){const e=f.slice();return e[2]=t[s],e}function Te(f){let t,s,e=f[0].sp.length>0&&$e(f);return{c(){t=y("div"),e&&e.c(),this.h()},l(l){t=T(l,"DIV",{class:!0});var i=E(t);e&&e.l(i),i.forEach(m),this.h()},h(){v(t,"class","item-container svelte-14b27x0")},m(l,i){k(l,t,i),e&&e.m(t,null),s=!0},p(l,i){l[0].sp.length>0?e?(e.p(l,i),i&1&&_(e,1)):(e=$e(l),e.c(),_(e,1),e.m(t,null)):e&&(S(),b(e,1,1,()=>{e=null}),w())},i(l){s||(_(e),s=!0)},o(l){b(e),s=!1},d(l){l&&m(t),e&&e.d()}}}function $e(f){let t,s,e=z(f[0].sp),l=[];for(let n=0;n<e.length;n+=1)l[n]=Ee(ye(f,e,n));const i=n=>b(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();t=j()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);t=j()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);k(n,t,r),s=!0},p(n,r){if(r&3){e=z(n[0].sp);let a;for(a=0;a<e.length;a+=1){const o=ye(n,e,a);l[a]?(l[a].p(o,r),_(l[a],1)):(l[a]=Ee(o),l[a].c(),_(l[a],1),l[a].m(t.parentNode,t))}for(S(),a=e.length;a<l.length;a+=1)i(a);w()}},i(n){if(!s){for(let r=0;r<e.length;r+=1)_(l[r]);s=!0}},o(n){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)b(l[r]);s=!1},d(n){n&&m(t),H(l,n)}}}function Ee(f){let t,s;return t=new ot({props:{eq:f[2],assets:f[1]}}),{c(){N(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,l){C(t,e,l),s=!0},p(e,l){const i={};l&1&&(i.eq=e[2]),l&2&&(i.assets=e[1]),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){V(t,e)}}}function ct(f){let t,s,e=f[0]&&Te(f);return{c(){t=y("div"),e&&e.c(),this.h()},l(l){t=T(l,"DIV",{class:!0});var i=E(t);e&&e.l(i),i.forEach(m),this.h()},h(){v(t,"class","eq-display svelte-14b27x0")},m(l,i){k(l,t,i),e&&e.m(t,null),s=!0},p(l,[i]){l[0]?e?(e.p(l,i),i&1&&_(e,1)):(e=Te(l),e.c(),_(e,1),e.m(t,null)):e&&(S(),b(e,1,1,()=>{e=null}),w())},i(l){s||(_(e),s=!0)},o(l){b(e),s=!1},d(l){l&&m(t),e&&e.d()}}}function ut(f,t,s){let{currentItem:e=null}=t,{assets:l}=t;return U(async()=>{}),f.$$set=i=>{"currentItem"in i&&s(0,e=i.currentItem),"assets"in i&&s(1,l=i.assets)},[e,l]}class mt extends F{constructor(t){super(),J(this,t,ut,ct,X,{currentItem:0,assets:1})}}function qe(f,t,s){const e=f.slice();return e[6]=t[s],e[8]=s,e}function Ie(f){let t,s,e,l,i,n,r,a,o=z(f[0]),c=[];for(let u=0;u<o.length;u+=1)c[u]=Pe(qe(f,o,u));const g=u=>b(c[u],1,1,()=>{c[u]=null});return r=new mt({props:{assets:f[1],currentItem:f[2]}}),{c(){t=y("div"),s=y("div"),e=y("div"),l=y("div");for(let u=0;u<c.length;u+=1)c[u].c();i=I(),n=y("div"),N(r.$$.fragment),this.h()},l(u){t=T(u,"DIV",{class:!0});var h=E(t);s=T(h,"DIV",{class:!0});var d=E(s);e=T(d,"DIV",{class:!0});var p=E(e);l=T(p,"DIV",{class:!0});var O=E(l);for(let G=0;G<c.length;G+=1)c[G].l(O);O.forEach(m),p.forEach(m),i=P(d),n=T(d,"DIV",{class:!0});var K=E(n);D(r.$$.fragment,K),K.forEach(m),d.forEach(m),h.forEach(m),this.h()},h(){v(l,"class","flex flex-col space-y-2 w-full"),v(e,"class","eq-panel svelte-n77zqy"),v(n,"class","side-panel svelte-n77zqy"),v(s,"class","eq-player-main svelte-n77zqy"),v(t,"class","eq-player-wrapper svelte-n77zqy")},m(u,h){k(u,t,h),$(t,s),$(s,e),$(e,l);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(l,null);$(s,i),$(s,n),C(r,n,null),a=!0},p(u,h){if(h&9){o=z(u[0]);let p;for(p=0;p<o.length;p+=1){const O=qe(u,o,p);c[p]?(c[p].p(O,h),_(c[p],1)):(c[p]=Pe(O),c[p].c(),_(c[p],1),c[p].m(l,null))}for(S(),p=o.length;p<c.length;p+=1)g(p);w()}const d={};h&2&&(d.assets=u[1]),h&4&&(d.currentItem=u[2]),r.$set(d)},i(u){if(!a){for(let h=0;h<o.length;h+=1)_(c[h]);_(r.$$.fragment,u),a=!0}},o(u){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)b(c[h]);b(r.$$.fragment,u),a=!1},d(u){u&&m(t),H(c,u),V(r)}}}function Pe(f){let t,s,e=f[8]+1+"",l,i,n,r,a,o,c,g,u;return r=new Ye({props:{eq:f[6]}}),{c(){t=y("button"),s=y("div"),l=L(e),i=I(),n=y("div"),N(r.$$.fragment),o=I(),this.h()},l(h){t=T(h,"BUTTON",{class:!0});var d=E(t);s=T(d,"DIV",{class:!0});var p=E(s);l=A(p,e),p.forEach(m),i=P(d),n=T(d,"DIV",{class:!0});var O=E(n);D(r.$$.fragment,O),O.forEach(m),o=P(d),d.forEach(m),this.h()},h(){v(s,"class","m-1 p-1 rounded-2xl text-sm bg-stone-600"),v(n,"class",a=x(f[3](f[6])?"focused w-full text-center":"nonFocused w-full text-center")+" svelte-n77zqy"),v(t,"class","flex w-full items-center")},m(h,d){k(h,t,d),$(t,s),$(s,l),$(t,i),$(t,n),C(r,n,null),$(t,o),c=!0,g||(u=Ae(t,"click",ht),g=!0)},p(h,d){const p={};d&1&&(p.eq=h[6]),r.$set(p),(!c||d&1&&a!==(a=x(h[3](h[6])?"focused w-full text-center":"nonFocused w-full text-center")+" svelte-n77zqy"))&&v(n,"class",a)},i(h){c||(_(r.$$.fragment,h),c=!0)},o(h){b(r.$$.fragment,h),c=!1},d(h){h&&m(t),V(r),g=!1,u()}}}function dt(f){let t,s,e=f[0]&&f[1]&&Ie(f);return{c(){e&&e.c(),t=j()},l(l){e&&e.l(l),t=j()},m(l,i){e&&e.m(l,i),k(l,t,i),s=!0},p(l,[i]){l[0]&&l[1]?e?(e.p(l,i),i&3&&_(e,1)):(e=Ie(l),e.c(),_(e,1),e.m(t.parentNode,t)):e&&(S(),b(e,1,1,()=>{e=null}),w())},i(l){s||(_(e),s=!0)},o(l){b(e),s=!1},d(l){l&&m(t),e&&e.d(l)}}}const ht=()=>{};function _t(f,t,s){let{items:e}=t,{assets:l}=t,{currentTime:i=0}=t,n=null,{setPulse:r=o=>{}}=t;function a(o){return i>=o.startTime&&i<o.calcEndTime?(s(2,n=o),!0):!1}return U(async()=>{}),f.$$set=o=>{"items"in o&&s(0,e=o.items),"assets"in o&&s(1,l=o.assets),"currentTime"in o&&s(4,i=o.currentTime),"setPulse"in o&&s(5,r=o.setPulse)},[e,l,n,a,i,r]}class gt extends F{constructor(t){super(),J(this,t,_t,dt,X,{items:0,assets:1,currentTime:4,setPulse:5})}}function Se(f,t){let s=null;for(let e=0;e<t.length;e++){const l=t[e];f>=l.startTime&&f<l.calcEndTime&&(s=l)}return s}class pt{constructor(t){this.slides=t}getSlidePeriod(t=0){const s=this.slides[t];if(s.type=="canvas")return s.endTime;if(s.type=="eqs")return this.getEqSlidePeriod(s)}getTotalPeriod(){let t=0;for(let s=0;s<this.slides.length;s++)this.slides[s],t+=this.getSlidePeriod(s);return t}getEqSlidePeriod(t){let s=0;for(let e=0;e<t.items.length;e++){const l=t.items[e];l.endTime==0&&(l.endTime=2),s+=l.endTime}return s}getSlideStartTime(t){let s=0;for(let e=0;e<t;e++)this.slides[e],s+=this.getSlidePeriod(e);return s}getSlideEndTime(t){let s=0;for(let e=0;e<t;e++)this.slides[e],s+=this.getSlidePeriod(e);return s+this.getSlidePeriod(t)}getCurrentItem(t){const s=this.getTotalPeriod();if(t>s)return null;let e=0;for(let l=0;l<this.slides.length;l++){const i=this.slides[l];if(t>=e&&t<e+this.getSlidePeriod(l))return i;e+=this.getSlidePeriod(l)}return null}getCurrentItemByIndex(t){return this.slides[t]}periodToStartEnd(){const t=JSON.parse(JSON.stringify(this.slides));let s=0;for(let e=0;e<t.length;e++){const l=t[e];l.type=="canvas"?(l.startTime=s,l.calcEndTime=l.startTime+l.endTime,s=l.calcEndTime):(l.startTime=s,l.calcEndTime=l.startTime+this.getEqSlidePeriod(l),bt(l,l.startTime),s=l.calcEndTime)}return t}}function bt(f,t){let s=t;for(let e=0;e<f.items.length;e++){const l=f.items[e];l.startTime=s,l.calcEndTime=l.startTime+l.endTime,s=l.calcEndTime}}function we(f){let t,s,e,l=f[3].type==="canvas"&&je(f),i=f[3].type==="eqs"&&Ne(f);return{c(){l&&l.c(),t=I(),i&&i.c(),s=j()},l(n){l&&l.l(n),t=P(n),i&&i.l(n),s=j()},m(n,r){l&&l.m(n,r),k(n,t,r),i&&i.m(n,r),k(n,s,r),e=!0},p(n,r){n[3].type==="canvas"?l?(l.p(n,r),r&8&&_(l,1)):(l=je(n),l.c(),_(l,1),l.m(t.parentNode,t)):l&&(S(),b(l,1,1,()=>{l=null}),w()),n[3].type==="eqs"?i?(i.p(n,r),r&8&&_(i,1)):(i=Ne(n),i.c(),_(i,1),i.m(s.parentNode,s)):i&&(S(),b(i,1,1,()=>{i=null}),w())},i(n){e||(_(l),_(i),e=!0)},o(n){b(l),b(i),e=!1},d(n){n&&(m(t),m(s)),l&&l.d(n),i&&i.d(n)}}}function je(f){let t,s,e,l;function i(a){f[10](a)}function n(a){f[11](a)}let r={assets:f[0]};return f[3].items!==void 0&&(r.itemLiterals=f[3].items),f[3].slideExtra!==void 0&&(r.background=f[3].slideExtra),t=new Ge({props:r}),M.push(()=>W(t,"itemLiterals",i)),M.push(()=>W(t,"background",n)),{c(){N(t.$$.fragment)},l(a){D(t.$$.fragment,a)},m(a,o){C(t,a,o),l=!0},p(a,o){const c={};o&1&&(c.assets=a[0]),!s&&o&8&&(s=!0,c.itemLiterals=a[3].items,R(()=>s=!1)),!e&&o&8&&(e=!0,c.background=a[3].slideExtra,R(()=>e=!1)),t.$set(c)},i(a){l||(_(t.$$.fragment,a),l=!0)},o(a){b(t.$$.fragment,a),l=!1},d(a){V(t,a)}}}function Ne(f){let t,s,e;function l(n){f[12](n)}let i={currentTime:f[2],assets:f[0]};return f[3].items!==void 0&&(i.items=f[3].items),t=new gt({props:i}),M.push(()=>W(t,"items",l)),{c(){N(t.$$.fragment)},l(n){D(t.$$.fragment,n)},m(n,r){C(t,n,r),e=!0},p(n,r){const a={};r&4&&(a.currentTime=n[2]),r&1&&(a.assets=n[0]),!s&&r&8&&(s=!0,a.items=n[3].items,R(()=>s=!1)),t.$set(a)},i(n){e||(_(t.$$.fragment,n),e=!0)},o(n){b(t.$$.fragment,n),e=!1},d(n){V(t,n)}}}function vt(f){let t,s,e,l;t=new ze({props:{currentTime:f[2],start:f[4],stop:f[5],totalTime:f[1],jumpTo:f[6]}});let i=f[3]!==null&&we(f);return{c(){N(t.$$.fragment),s=I(),e=y("div"),i&&i.c(),this.h()},l(n){D(t.$$.fragment,n),s=P(n),e=T(n,"DIV",{class:!0});var r=E(e);i&&i.l(r),r.forEach(m),this.h()},h(){v(e,"class","container svelte-gps455")},m(n,r){C(t,n,r),k(n,s,r),k(n,e,r),i&&i.m(e,null),l=!0},p(n,[r]){const a={};r&4&&(a.currentTime=n[2]),r&2&&(a.totalTime=n[1]),t.$set(a),n[3]!==null?i?(i.p(n,r),r&8&&_(i,1)):(i=we(n),i.c(),_(i,1),i.m(e,null)):i&&(S(),b(i,1,1,()=>{i=null}),w())},i(n){l||(_(t.$$.fragment,n),_(i),l=!0)},o(n){b(t.$$.fragment,n),b(i),l=!1},d(n){n&&(m(s),m(e)),V(t,n),i&&i.d()}}}function kt(f,t,s){let{slides:e}=t,{assets:l}=t,{soundFileName:i="/sounds/music.opus"}=t,n=null,r=0,a=null,o=300,c=0,g=new Oe(i);U(async()=>{debugger;a=new pt(e),s(1,o=a.getTotalPeriod()),s(7,e=a.periodToStartEnd()),s(3,n=Se(0,e))});function u(){r&&clearInterval(r),r=setInterval(d,20),s(9,g.volume=.01,g),g.start(),s(2,c=g.getCurrentTime())}function h(){r&&clearInterval(r),g.stop(),s(2,c=0)}function d(){g&&s(2,c=parseInt(g.getCurrentTime()/1e3))}function p(q){g.jumpTo(q),s(2,c=g.getCurrentTime()),console.log("jumping",q),console.log("return current time",c)}function O(q){f.$$.not_equal(n.items,q)&&(n.items=q,s(3,n),s(2,c),s(9,g),s(7,e),s(1,o))}function K(q){f.$$.not_equal(n.slideExtra,q)&&(n.slideExtra=q,s(3,n),s(2,c),s(9,g),s(7,e),s(1,o))}function G(q){f.$$.not_equal(n.items,q)&&(n.items=q,s(3,n),s(2,c),s(9,g),s(7,e),s(1,o))}return f.$$set=q=>{"slides"in q&&s(7,e=q.slides),"assets"in q&&s(0,l=q.assets),"soundFileName"in q&&s(8,i=q.soundFileName)},f.$$.update=()=>{f.$$.dirty&646&&g&&(s(3,n=Se(c,e)),c>o&&h())},[l,o,c,n,u,h,p,e,i,g,O,K,G]}class yt extends F{constructor(t){super(),J(this,t,kt,vt,X,{slides:7,assets:0,soundFileName:8})}}function De(f){let t,s;return t=new yt({props:{slides:f[0],assets:f[1]}}),{c(){N(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,l){C(t,e,l),s=!0},p(e,l){const i={};l&1&&(i.slides=e[0]),l&2&&(i.assets=e[1]),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){V(t,e)}}}function Tt(f){let t,s,e,l;t=new Ke({});let i=f[0]&&f[1]&&De(f);return{c(){N(t.$$.fragment),s=I(),i&&i.c(),e=j()},l(n){D(t.$$.fragment,n),s=P(n),i&&i.l(n),e=j()},m(n,r){C(t,n,r),k(n,s,r),i&&i.m(n,r),k(n,e,r),l=!0},p(n,[r]){n[0]&&n[1]?i?(i.p(n,r),r&3&&_(i,1)):(i=De(n),i.c(),_(i,1),i.m(e.parentNode,e)):i&&(S(),b(i,1,1,()=>{i=null}),w())},i(n){l||(_(t.$$.fragment,n),_(i),l=!0)},o(n){b(t.$$.fragment,n),b(i),l=!1},d(n){n&&(m(s),m(e)),V(t,n),i&&i.d(n)}}}let $t="/images/";function Et(f,t,s){let e=null,l=null,i=["atom.png","baloons.png","activity1.jpg","drops.png"];return U(async()=>{try{const n=new URLSearchParams(location.search).get("id"),r=await Be(`${Xe}/presentation/read/${n}`);if(r.ok){let a=await r.json();i=Fe(a.slides);const o=await Ue(i,$t);s(1,l=new He(o)),s(0,e=a.slides)}else console.error("Failed to fetch presentation"),Je.push("Failed to load presentation.")}catch(n){console.error("Error during onMount:",n)}}),[e,l]}class Ct extends F{constructor(t){super(),J(this,t,Et,Tt,X,{})}}export{Ct as component};
