import{s as ae,b as E,a as D,f as x,k as q,c as y,d as S,w as T,i as B,p as _,h as X,j as Q,t as se,m as le,l as ee,G as Me,q as ce,n as ie,a0 as je,g as de,a1 as pe,r as Le,v as ze,e as re,X as we,o as Oe,$ as Ee}from"../chunks/scheduler.D3Ivu5i1.js";import{S as ue,i as oe,t as v,g as te,a as p,c as ne,f as Y,b as M,d as L,m as O,e as j}from"../chunks/index.C5L_yzO8.js";import{C as Be}from"../chunks/CanvasEditor.CP51FaJl.js";import{E as We}from"../chunks/EqsEditor.icoGev_2.js";import{e as xe,u as He,d as Re}from"../chunks/each.1n-H-ZbZ.js";import{l as Ge,A as Je}from"../chunks/AddToolbar.svelte_svelte_type_style_lang.arbruj83.js";function Ie(s){let e,t,n,r;function u(l){s[13](l)}function i(l){s[14](l)}let a={slideStartTime:s[6],slideEndTime:s[7],currentTime:s[5],background:s[4],assets:s[2],images:s[3]};return s[0]!==void 0&&(a.items=s[0]),s[1]!==void 0&&(a.slideExtra=s[1]),e=new Be({props:a}),X.push(()=>Y(e,"items",u)),X.push(()=>Y(e,"slideExtra",i)),{c(){M(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,o){O(e,l,o),r=!0},p(l,o){const f={};o&64&&(f.slideStartTime=l[6]),o&128&&(f.slideEndTime=l[7]),o&32&&(f.currentTime=l[5]),o&16&&(f.background=l[4]),o&4&&(f.assets=l[2]),o&8&&(f.images=l[3]),!t&&o&1&&(t=!0,f.items=l[0],Q(()=>t=!1)),!n&&o&2&&(n=!0,f.slideExtra=l[1],Q(()=>n=!1)),e.$set(f)},i(l){r||(v(e.$$.fragment,l),r=!0)},o(l){p(e.$$.fragment,l),r=!1},d(l){j(e,l)}}}function Ce(s){let e,t,n,r;function u(l){s[15](l)}function i(l){s[16](l)}let a={slideStartTime:s[6],slideEndTime:s[7],currentTime:s[5]};return s[0]!==void 0&&(a.items=s[0]),s[1]!==void 0&&(a.slideExtra=s[1]),e=new We({props:a}),X.push(()=>Y(e,"items",u)),X.push(()=>Y(e,"slideExtra",i)),{c(){M(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,o){O(e,l,o),r=!0},p(l,o){const f={};o&64&&(f.slideStartTime=l[6]),o&128&&(f.slideEndTime=l[7]),o&32&&(f.currentTime=l[5]),!t&&o&1&&(t=!0,f.items=l[0],Q(()=>t=!1)),!n&&o&2&&(n=!0,f.slideExtra=l[1],Q(()=>n=!1)),e.$set(f)},i(l){r||(v(e.$$.fragment,l),r=!0)},o(l){p(e.$$.fragment,l),r=!1},d(l){j(e,l)}}}function Xe(s){let e,t=s[8].toLowerCase()=="canvas",n,r=s[8].toLowerCase()=="eqs",u,i=t&&Ie(s),a=r&&Ce(s);return{c(){e=E("div"),i&&i.c(),n=D(),a&&a.c(),this.h()},l(l){e=x(l,"DIV",{tabindex:!0});var o=q(e);i&&i.l(o),n=y(o),a&&a.l(o),o.forEach(S),this.h()},h(){T(e,"tabindex","0")},m(l,o){B(l,e,o),i&&i.m(e,null),_(e,n),a&&a.m(e,null),u=!0},p(l,[o]){o&256&&(t=l[8].toLowerCase()=="canvas"),t?i?(i.p(l,o),o&256&&v(i,1)):(i=Ie(l),i.c(),v(i,1),i.m(e,n)):i&&(te(),p(i,1,1,()=>{i=null}),ne()),o&256&&(r=l[8].toLowerCase()=="eqs"),r?a?(a.p(l,o),o&256&&v(a,1)):(a=Ce(l),a.c(),v(a,1),a.m(e,null)):a&&(te(),p(a,1,1,()=>{a=null}),ne())},i(l){u||(v(i),v(a),u=!0)},o(l){p(i),p(a),u=!1},d(l){l&&S(e),i&&i.d(),a&&a.d()}}}function Qe(s,e,t){let{items:n}=e,{assets:r}=e,{images:u}=e,{background:i}=e,{slideStartTime:a}=e,{slideEndTime:l}=e,{slideExtra:o}=e,{currentTime:f=0}=e,{startTime:b}=e,{endTime:c}=e,{currentSldieType:d}=e,{soundUrl:m}=e,{audioData:I=""}=e;function C(g){n=g,t(0,n)}function N(g){o=g,t(1,o)}function P(g){n=g,t(0,n)}function A(g){o=g,t(1,o)}return s.$$set=g=>{"items"in g&&t(0,n=g.items),"assets"in g&&t(2,r=g.assets),"images"in g&&t(3,u=g.images),"background"in g&&t(4,i=g.background),"slideStartTime"in g&&t(9,a=g.slideStartTime),"slideEndTime"in g&&t(10,l=g.slideEndTime),"slideExtra"in g&&t(1,o=g.slideExtra),"currentTime"in g&&t(5,f=g.currentTime),"startTime"in g&&t(6,b=g.startTime),"endTime"in g&&t(7,c=g.endTime),"currentSldieType"in g&&t(8,d=g.currentSldieType),"soundUrl"in g&&t(11,m=g.soundUrl),"audioData"in g&&t(12,I=g.audioData)},[n,o,r,u,i,f,b,c,d,a,l,m,I,C,N,P,A]}class Ye extends ue{constructor(e){super(),oe(this,e,Qe,Xe,ae,{items:0,assets:2,images:3,background:4,slideStartTime:9,slideEndTime:10,slideExtra:1,currentTime:5,startTime:6,endTime:7,currentSldieType:8,soundUrl:11,audioData:12})}}function Ke(s){let e,t,n,r,u,i,a,l,o;return{c(){e=E("div"),t=E("button"),n=E("span"),r=se(s[1]),u=D(),i=E("span"),a=se(s[2]),this.h()},l(f){e=x(f,"DIV",{class:!0});var b=q(e);t=x(b,"BUTTON",{class:!0});var c=q(t);n=x(c,"SPAN",{class:!0});var d=q(n);r=le(d,s[1]),d.forEach(S),u=y(c),i=x(c,"SPAN",{class:!0});var m=q(i);a=le(m,s[2]),m.forEach(S),c.forEach(S),b.forEach(S),this.h()},h(){T(n,"class","text-md"),T(i,"class","text-xs font-md text-white"),T(t,"class","w-full flex flex-col items-center p-2 m-0 rounded hover:bg-gray-500 active:bg-gray-900"),T(e,"class","w-15 hover:bg-gray-700 rounded-md")},m(f,b){B(f,e,b),_(e,t),_(t,n),_(n,r),_(t,u),_(t,i),_(i,a),l||(o=ee(t,"click",function(){Me(s[0])&&s[0].apply(this,arguments)}),l=!0)},p(f,[b]){s=f,b&2&&ce(r,s[1]),b&4&&ce(a,s[2])},i:ie,o:ie,d(f){f&&S(e),l=!1,o()}}}function Ze(s,e,t){let{clk:n}=e,{icon:r="🧪"}=e,{title:u="Menu"}=e;return s.$$set=i=>{"clk"in i&&t(0,n=i.clk),"icon"in i&&t(1,r=i.icon),"title"in i&&t(2,u=i.title)},[n,r,u]}class K extends ue{constructor(e){super(),oe(this,e,Ze,Ke,ae,{clk:0,icon:1,title:2})}}function $e(s){let e,t,n,r,u;return t=new K({props:{title:"Eqs",icon:"📋",clk:s[1]}}),r=new K({props:{title:"Canvas",icon:"📺",clk:s[2]}}),{c(){e=E("div"),M(t.$$.fragment),n=D(),M(r.$$.fragment),this.h()},l(i){e=x(i,"DIV",{class:!0});var a=q(e);L(t.$$.fragment,a),n=y(a),L(r.$$.fragment,a),a.forEach(S),this.h()},h(){T(e,"class","flex flex-wrap bg-gray-900 border-2 border-white gap-2 p-1 rounded-md")},m(i,a){B(i,e,a),O(t,e,null),_(e,n),O(r,e,null),u=!0},p(i,[a]){const l={};a&1&&(l.clk=i[1]),t.$set(l);const o={};a&1&&(o.clk=i[2]),r.$set(o)},i(i){u||(v(t.$$.fragment,i),v(r.$$.fragment,i),u=!0)},o(i){p(t.$$.fragment,i),p(r.$$.fragment,i),u=!1},d(i){i&&S(e),j(t),j(r)}}}function et(s,e,t){let{addNew:n}=e;const r=()=>n("eqs"),u=()=>n("canvas");return s.$$set=i=>{"addNew"in i&&t(0,n=i.addNew)},[n,r,u]}class tt extends ue{constructor(e){super(),oe(this,e,et,$e,ae,{addNew:0})}}function nt(s={},e="",t=""){return e||(e=Ne().split("-")[0]),{uuid:Ne(),name:e,content:t,showAt:0,hideAt:null,itemExtra:s}}function Ne(){const s=()=>Math.floor(Math.random()*16).toString(16);return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=s();return(e==="x"?t:t&3|8).toString(16)})}function it(s){const e=[];for(const t of s)t.itemExtra&&e.push({parentUUID:t.uuid,childUUID:t.itemExtra.uuid});return e}function st(s,e,t){const n=[],r={};t.forEach(a=>{r[a.uuid]={...a},delete r[a.uuid].itemExtra});const u={};e.forEach(a=>{u[a.uuid]=a});const i=new Set;return s.forEach(({parentUUID:a,childUUID:l})=>{if(r[a]&&u[l]){const o=r[a];o.itemExtra=u[l],n.push(o),i.add(l),delete r[a]}}),e.forEach(a=>{if(!i.has(a.uuid)){const l=nt();l.itemExtra=a,n.push(l)}}),n}class lt{constructor(e,t={}){this.slides=e,this.slideExtra=t,this._currentSlideIndex=0,this.oldItems=null,this.record=null}setFirstSlide(){this.slides.length>0&&(this.slides[0].startTime=0)}shiftTime(){debugger;this.setFirstSlide();for(let t=0;t<this.slides.length;t++){const n=this.slides[t];if(n.endTime-n.startTime<2&&(n.endTime=n.startTime+2),t>0){const u=this.slides[t-1],i=Math.abs(n.endTime-n.startTime);n.startTime=u.endTime,n.endTime=n.startTime+i}}}saveIfNewCurrentSlideIsCanvas(e){const t=this.slides[e];if(t.type=="canvas"){this.oldItems=t.items,this.record=it(this.oldItems);const n=rt(t.items);t.items=n}}restoreIfOldCurrentSlideIsCanvas(e){const t=this.slides[e];if(t.type!=="canvas"||!this.record||!this.oldItems)return;const n=st(this.record,t.items,this.oldItems);t.items=n,this.oldItems=null,this.record=null}setCurrentSlide(e){this.currentSlide=e}set currentSlide(e){if(!(e<0||e>this.slides.length-1)){try{const t=this._currentSlideIndex;this.restoreIfOldCurrentSlideIsCanvas(t)}catch{}this._currentSlideIndex=e;try{this.saveIfNewCurrentSlideIsCanvas(e)}catch{}}}get currentSlide(){return this.slides[this._currentSlideIndex]}next(){this.currentSlide=this.getCurrentSlideIndex()+1}prev(){this.currentSlide=this.getCurrentSlideIndex()-1}getCurrentSlideIndex(){return this._currentSlideIndex}del(){const e=this.getCurrentSlideIndex();this.slides.splice(e,1),this.slides.length>0?this.currentSlide=0:this.currentSlide=null}clone(){if(!this.currentSlide)return!1;try{const e=this.getCurrentSlideIndex(),t=JSON.parse(JSON.stringify(this.slides[e]));t.uuid=at(),this.slides=[...this.slides,t]}catch(e){return console.error("Failed to clone slide:",e),!1}}moveUp(){const e=this.getCurrentSlideIndex();e<=0||([this.slides[e],this.slides[e-1]]=[this.slides[e-1],this.slides[e]],this.setCurrentSlide(e-1))}moveDown(e){e>=slides.length-1||([slides[e],slides[e+1]]=[slides[e+1],slides[e]],slides=[...slides],currentSlideIndex===e?appEditor.setCurrentSlide(e+1):currentSlideIndex===e+1&&appEditor.setCurrentSlide(e),redraw())}}function rt(s){const e=[];for(let t=0;t<s.length;t++){const n=s[t];e.push(n.itemExtra)}return e}function at(){const s=()=>Math.floor(Math.random()*16).toString(16);return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=s();return(e==="x"?t:t&3|8).toString(16)})}function ut(s){let e,t,n;return t=new K({props:{title:"No Sound",icon:"🔇"}}),{c(){e=E("div"),M(t.$$.fragment),this.h()},l(r){e=x(r,"DIV",{class:!0});var u=q(e);L(t.$$.fragment,u),u.forEach(S),this.h()},h(){T(e,"class","text-lg")},m(r,u){B(r,e,u),O(t,e,null),n=!0},p:ie,i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){p(t.$$.fragment,r),n=!1},d(r){r&&S(e),j(t)}}}function ot(s){let e,t,n,r,u,i,a=Math.round(s[1].duration())+"",l,o,f,b,c="▶||",d,m,I="◼",C,N,P,A,g;return{c(){e=E("div"),t=E("div"),n=E("div"),r=se("🎵"),u=se(s[0]),i=se("/"),l=se(a),o=D(),f=E("div"),b=E("button"),b.textContent=c,d=D(),m=E("button"),m.textContent=I,C=D(),N=E("input"),this.h()},l(h){e=x(h,"DIV",{class:!0});var U=q(e);t=x(U,"DIV",{class:!0});var R=q(t);n=x(R,"DIV",{});var Z=q(n);r=le(Z,"🎵"),u=le(Z,s[0]),i=le(Z,"/"),l=le(Z,a),Z.forEach(S),R.forEach(S),o=y(U),f=x(U,"DIV",{class:!0});var G=q(f);b=x(G,"BUTTON",{class:!0,"data-svelte-h":!0}),de(b)!=="svelte-11y372z"&&(b.textContent=c),d=y(G),m=x(G,"BUTTON",{class:!0,"data-svelte-h":!0}),de(m)!=="svelte-mtd94o"&&(m.textContent=I),C=y(G),N=x(G,"INPUT",{class:!0,type:!0,min:!0,max:!0}),G.forEach(S),U.forEach(S),this.h()},h(){T(t,"class","flex justify-center bg-red-900 text-white text-xs"),T(b,"class","p-1 m-1 bg-green-700"),T(m,"class","p-1 m-1 bg-orange-700"),T(N,"class","w-full"),T(N,"type","range"),T(N,"min",0),T(N,"max",P=s[1].duration()),T(f,"class","flex w-full"),T(e,"class","flex flex-col")},m(h,U){B(h,e,U),_(e,t),_(t,n),_(n,r),_(n,u),_(n,i),_(n,l),_(e,o),_(e,f),_(f,b),_(f,d),_(f,m),_(f,C),_(f,N),pe(N,s[0]),A||(g=[ee(b,"click",s[3]),ee(m,"click",s[2]),ee(N,"change",s[5]),ee(N,"input",s[5]),ee(N,"input",s[6])],A=!0)},p(h,U){U&1&&ce(u,h[0]),U&2&&a!==(a=Math.round(h[1].duration())+"")&&ce(l,a),U&2&&P!==(P=h[1].duration())&&T(N,"max",P),U&1&&pe(N,h[0])},i:ie,o:ie,d(h){h&&S(e),A=!1,Le(g)}}}function dt(s){let e,t,n,r;const u=[ot,ut],i=[];function a(l,o){return l[1]?0:1}return t=a(s),n=i[t]=u[t](s),{c(){e=E("div"),n.c(),this.h()},l(l){e=x(l,"DIV",{class:!0});var o=q(e);n.l(o),o.forEach(S),this.h()},h(){T(e,"class","flex justify-center items-center text-xs bg-green-700 p-1 rounded-md")},m(l,o){B(l,e,o),i[t].m(e,null),r=!0},p(l,[o]){let f=t;t=a(l),t===f?i[t].p(l,o):(te(),p(i[f],1,1,()=>{i[f]=null}),ne(),n=i[t],n?n.p(l,o):(n=i[t]=u[t](l),n.c()),v(n,1),n.m(e,null))},i(l){r||(v(n),r=!0)},o(l){p(n),r=!1},d(l){l&&S(e),i[t].d()}}}function ft(s,e,t){let{narration:n=null}=e,{currentTime:r=0}=e,u=null,i=!1;function a(){n&&(i=!1,n.stop(),clearInterval(u),t(0,r=0))}function l(){n&&(i?(i=!1,n.pause(),clearInterval(u)):(i=!0,n.play(),u=setInterval(o,1e3)))}function o(){n&&t(0,r=Math.round(n.seek()))}function f(d){n&&d>=0&&d<=n.duration()&&(n.seek(d),t(0,r=Math.round(d)))}function b(){r=je(this.value),t(0,r)}const c=d=>f(d.target.value);return s.$$set=d=>{"narration"in d&&t(1,n=d.narration),"currentTime"in d&&t(0,r=d.currentTime)},[r,n,a,l,f,b,c]}class ct extends ue{constructor(e){super(),oe(this,e,ft,dt,ae,{narration:1,currentTime:0})}}function mt(){const s=()=>Math.floor(Math.random()*16).toString(16);return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=s();return(e==="x"?t:t&3|8).toString(16)})}function Ae(s){let e,t,n;function r(i){s[16](i)}let u={soundFile:s[10],narration:s[5].narration||null};return s[2]!==void 0&&(u.currentTime=s[2]),e=new ct({props:u}),X.push(()=>Y(e,"currentTime",r)),{c(){M(e.$$.fragment)},l(i){L(e.$$.fragment,i)},m(i,a){O(e,i,a),n=!0},p(i,a){const l={};a&1024&&(l.soundFile=i[10]),a&32&&(l.narration=i[5].narration||null),!t&&a&4&&(t=!0,l.currentTime=i[2],Q(()=>t=!1)),e.$set(l)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){j(e,i)}}}function ht(s){let e,t,n,r,u,i,a,l,o,f,b,c,d,m,I,C,N,P="Start",A,g,h,U,R,Z="End",G,H,me,$,w,J,fe,ge,_e;n=new K({props:{title:"SP",icon:"🚪",clk:s[14]}}),u=new K({props:{title:"Slide",icon:"💡",clk:s[15]}}),a=new K({props:{title:"Save",icon:"💾",clk:s[6]}}),o=new K({props:{title:"Prev",icon:"<<",clk:s[4]}}),b=new K({props:{title:"Next",icon:">>",clk:s[3]}}),d=new K({props:{title:"Log",icon:"🖨️",clk:s[7]}});let V=s[10]&&Ae(s);return $=new K({props:{title:"Clone",icon:"🐑",clk:s[9]}}),J=new K({props:{title:"Delete",icon:"🗑️",clk:s[8]}}),{c(){e=E("div"),t=E("div"),M(n.$$.fragment),r=D(),M(u.$$.fragment),i=D(),M(a.$$.fragment),l=D(),M(o.$$.fragment),f=D(),M(b.$$.fragment),c=D(),M(d.$$.fragment),m=D(),V&&V.c(),I=D(),C=E("div"),N=E("span"),N.textContent=P,A=D(),g=E("div"),h=se(s[12]),U=D(),R=E("span"),R.textContent=Z,G=D(),H=E("input"),me=D(),M($.$$.fragment),w=D(),M(J.$$.fragment),this.h()},l(k){e=x(k,"DIV",{class:!0,style:!0});var F=q(e);t=x(F,"DIV",{class:!0});var z=q(t);L(n.$$.fragment,z),r=y(z),L(u.$$.fragment,z),i=y(z),L(a.$$.fragment,z),l=y(z),L(o.$$.fragment,z),f=y(z),L(b.$$.fragment,z),c=y(z),L(d.$$.fragment,z),m=y(z),V&&V.l(z),z.forEach(S),I=y(F),C=x(F,"DIV",{class:!0});var W=q(C);N=x(W,"SPAN",{class:!0,"data-svelte-h":!0}),de(N)!=="svelte-114xiwa"&&(N.textContent=P),A=y(W),g=x(W,"DIV",{class:!0,type:!0});var he=q(g);h=le(he,s[12]),he.forEach(S),U=y(W),R=x(W,"SPAN",{class:!0,"data-svelte-h":!0}),de(R)!=="svelte-1a3n0d9"&&(R.textContent=Z),G=y(W),H=x(W,"INPUT",{class:!0,type:!0,min:!0,max:!0}),me=y(W),L($.$$.fragment,W),w=y(W),L(J.$$.fragment,W),W.forEach(S),F.forEach(S),this.h()},h(){T(t,"class","flex justify-start items-center gap-1"),T(N,"class","text-xs"),T(g,"class","bg-gray-900 text-white p-0 px-4 m-0 rounded-md border-2 border-white"),T(g,"type","number"),T(R,"class","text-xs"),T(H,"class","bg-gray-500 text-white p-0 px-1 m-0 rounded-md border-2 border-white text-center "),T(H,"type","number"),H.value=s[13],T(H,"min","0"),T(H,"max","3600"),T(C,"class","flex justify-end m-0 p-1 items-center gap-1 border-2 border-gray-500 rounded-md text-xs mr-1"),T(e,"class","flex justify-between bg-gray-700 m-0 p-0 items-center gap-1 pt-2 px-2 "),ze(e,"color","whitesmoke")},m(k,F){B(k,e,F),_(e,t),O(n,t,null),_(t,r),O(u,t,null),_(t,i),O(a,t,null),_(t,l),O(o,t,null),_(t,f),O(b,t,null),_(t,c),O(d,t,null),_(t,m),V&&V.m(t,null),_(e,I),_(e,C),_(C,N),_(C,A),_(C,g),_(g,h),_(C,U),_(C,R),_(C,G),_(C,H),_(C,me),O($,C,null),_(C,w),O(J,C,null),fe=!0,ge||(_e=ee(H,"input",s[17]),ge=!0)},p(k,[F]){const z={};F&2&&(z.clk=k[14]),n.$set(z);const W={};F&1&&(W.clk=k[15]),u.$set(W);const he={};F&64&&(he.clk=k[6]),a.$set(he);const be={};F&16&&(be.clk=k[4]),o.$set(be);const ve={};F&8&&(ve.clk=k[3]),b.$set(ve);const Te={};F&128&&(Te.clk=k[7]),d.$set(Te),k[10]?V?(V.p(k,F),F&1024&&v(V,1)):(V=Ae(k),V.c(),v(V,1),V.m(t,null)):V&&(te(),p(V,1,1,()=>{V=null}),ne()),(!fe||F&4096)&&ce(h,k[12]),(!fe||F&8192&&H.value!==k[13])&&(H.value=k[13]);const Se={};F&512&&(Se.clk=k[9]),$.$set(Se);const ke={};F&256&&(ke.clk=k[8]),J.$set(ke)},i(k){fe||(v(n.$$.fragment,k),v(u.$$.fragment,k),v(a.$$.fragment,k),v(o.$$.fragment,k),v(b.$$.fragment,k),v(d.$$.fragment,k),v(V),v($.$$.fragment,k),v(J.$$.fragment,k),fe=!0)},o(k){p(n.$$.fragment,k),p(u.$$.fragment,k),p(a.$$.fragment,k),p(o.$$.fragment,k),p(b.$$.fragment,k),p(d.$$.fragment,k),p(V),p($.$$.fragment,k),p(J.$$.fragment,k),fe=!1},d(k){k&&S(e),j(n),j(u),j(a),j(o),j(b),j(d),V&&V.d(),j($),j(J),ge=!1,_e()}}}function gt(s,e,t){let{next:n}=e,{prev:r}=e,{show:u}=e,{assets:i}=e,{showSidePanel:a}=e,{save:l=()=>{}}=e,{log:o=()=>{}}=e,{deleteFn:f}=e,{clone:b}=e,{soundFile:c=null}=e,{shiftTimeLocal:d}=e,{currentTime:m=0}=e,{startTime:I}=e,{endTime:C}=e;const N=()=>t(1,a=!a),P=()=>t(0,u=!u);function A(h){m=h,t(2,m)}const g=h=>d(+h.target.value);return s.$$set=h=>{"next"in h&&t(3,n=h.next),"prev"in h&&t(4,r=h.prev),"show"in h&&t(0,u=h.show),"assets"in h&&t(5,i=h.assets),"showSidePanel"in h&&t(1,a=h.showSidePanel),"save"in h&&t(6,l=h.save),"log"in h&&t(7,o=h.log),"deleteFn"in h&&t(8,f=h.deleteFn),"clone"in h&&t(9,b=h.clone),"soundFile"in h&&t(10,c=h.soundFile),"shiftTimeLocal"in h&&t(11,d=h.shiftTimeLocal),"currentTime"in h&&t(2,m=h.currentTime),"startTime"in h&&t(12,I=h.startTime),"endTime"in h&&t(13,C=h.endTime)},[u,a,m,n,r,i,l,o,f,b,c,d,I,C,N,P,A,g]}class _t extends ue{constructor(e){super(),oe(this,e,gt,ht,ae,{next:3,prev:4,show:0,assets:5,showSidePanel:1,save:6,log:7,deleteFn:8,clone:9,soundFile:10,shiftTimeLocal:11,currentTime:2,startTime:12,endTime:13})}}function De(s,e,t){const n=s.slice();return n[5]=e[t],n[7]=t,n}function bt(s){let e,t="No items";return{c(){e=E("div"),e.textContent=t,this.h()},l(n){e=x(n,"DIV",{class:!0,"data-svelte-h":!0}),de(e)!=="svelte-16rqrt9"&&(e.textContent=t),this.h()},h(){T(e,"class","stack-panel-empty svelte-1f7zamn")},m(n,r){B(n,e,r)},p:ie,d(n){n&&S(e)}}}function vt(s){let e=[],t=new Map,n,r=xe(s[0]);const u=i=>i[7];for(let i=0;i<r.length;i+=1){let a=De(s,r,i),l=u(a);t.set(l,e[i]=ye(l,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();n=re()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);n=re()},m(i,a){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(i,a);B(i,n,a)},p(i,a){a&15&&(r=xe(i[0]),e=He(e,a,u,1,i,r,t,n.parentNode,Re,ye,n,De))},d(i){i&&S(n);for(let a=0;a<e.length;a+=1)e[a].d(i)}}}function ye(s,e){let t,n,r=String(e[5].type||"").toUpperCase().slice(0,7)+"",u,i,a,l,o,f="↓",b,c,d="↑",m,I,C;function N(){return e[4](e[7])}return{key:s,first:null,c(){t=E("div"),n=E("button"),u=se(r),i=D(),a=E("div"),l=E("div"),o=E("button"),o.textContent=f,b=D(),c=E("button"),c.textContent=d,m=D(),this.h()},l(P){t=x(P,"DIV",{class:!0});var A=q(t);n=x(A,"BUTTON",{class:!0});var g=q(n);u=le(g,r),g.forEach(S),i=y(A),a=x(A,"DIV",{class:!0});var h=q(a);l=x(h,"DIV",{class:!0});var U=q(l);o=x(U,"BUTTON",{class:!0,"data-svelte-h":!0}),de(o)!=="svelte-13b1b4n"&&(o.textContent=f),b=y(U),c=x(U,"BUTTON",{class:!0,"data-svelte-h":!0}),de(c)!=="svelte-19s49iu"&&(c.textContent=d),U.forEach(S),h.forEach(S),m=y(A),A.forEach(S),this.h()},h(){T(n,"class","stack-panel-selector svelte-1f7zamn"),T(o,"class","stack-panel-move-button svelte-1f7zamn"),T(c,"class","stack-panel-move-button svelte-1f7zamn"),T(l,"class","stack-panel-move-buttons svelte-1f7zamn"),T(a,"class","stack-panel-actions svelte-1f7zamn"),T(t,"class","stack-panel-item svelte-1f7zamn"),we(t,"selected",e[7]===e[1]),this.first=t},m(P,A){B(P,t,A),_(t,n),_(n,u),_(t,i),_(t,a),_(a,l),_(l,o),_(l,b),_(l,c),_(t,m),I||(C=[ee(n,"click",N),ee(o,"click",St),ee(c,"click",function(){Me(e[3])&&e[3].apply(this,arguments)})],I=!0)},p(P,A){e=P,A&1&&r!==(r=String(e[5].type||"").toUpperCase().slice(0,7)+"")&&ce(u,r),A&3&&we(t,"selected",e[7]===e[1])},d(P){P&&S(t),I=!1,Le(C)}}}function Tt(s){let e;function t(u,i){return u[0]&&u[0].length>0?vt:bt}let n=t(s),r=n(s);return{c(){r.c(),e=re()},l(u){r.l(u),e=re()},m(u,i){r.m(u,i),B(u,e,i)},p(u,[i]){n===(n=t(u))&&r?r.p(u,i):(r.d(1),r=n(u),r&&(r.c(),r.m(e.parentNode,e)))},i:ie,o:ie,d(u){u&&S(e),r.d(u)}}}function St(){console.log("move down")}function kt(s,e,t){let{slides:n}=e,{currentSlideIndex:r}=e,{setCurrentSlide:u}=e,{moveUp:i}=e;const a=l=>u(l);return s.$$set=l=>{"slides"in l&&t(0,n=l.slides),"currentSlideIndex"in l&&t(1,r=l.currentSlideIndex),"setCurrentSlide"in l&&t(2,u=l.setCurrentSlide),"moveUp"in l&&t(3,i=l.moveUp)},[n,r,u,i,a]}class pt extends ue{constructor(e){super(),oe(this,e,kt,Tt,ae,{slides:0,currentSlideIndex:1,setCurrentSlide:2,moveUp:3})}}function wt(s,e={}){return e.imagesUrl||(e.imagesUrl="https://taleem-media.blr1.cdn.digitaloceanspaces.com/bucket/"),{uuid:mt(),name:"New Slide",version:"basic",startTime:0,endTime:10,type:s,template:"",items:[],slideExtra:e}}function qe(s){let e,t,n,r,u,i;function a(c){s[19](c)}function l(c){s[20](c)}function o(c){s[21](c)}function f(c){s[22](c)}let b={prev:s[13],next:s[12],log:s[10],clone:s[16],assets:s[5],deleteFn:s[18],shiftTimeLocal:s[15]};return s[7]!==void 0&&(b.showSidePanel=s[7]),s[8]!==void 0&&(b.show=s[8]),s[6].startTime!==void 0&&(b.startTime=s[6].startTime),s[6].endTime!==void 0&&(b.endTime=s[6].endTime),e=new _t({props:b}),X.push(()=>Y(e,"showSidePanel",a)),X.push(()=>Y(e,"show",l)),X.push(()=>Y(e,"startTime",o)),X.push(()=>Y(e,"endTime",f)),{c(){M(e.$$.fragment)},l(c){L(e.$$.fragment,c)},m(c,d){O(e,c,d),i=!0},p(c,d){const m={};d&32&&(m.assets=c[5]),!t&&d&128&&(t=!0,m.showSidePanel=c[7],Q(()=>t=!1)),!n&&d&256&&(n=!0,m.show=c[8],Q(()=>n=!1)),!r&&d&64&&(r=!0,m.startTime=c[6].startTime,Q(()=>r=!1)),!u&&d&64&&(u=!0,m.endTime=c[6].endTime,Q(()=>u=!1)),e.$set(m)},i(c){i||(v(e.$$.fragment,c),i=!0)},o(c){p(e.$$.fragment,c),i=!1},d(c){j(e,c)}}}function Ue(s){let e,t;return e=new tt({props:{addNew:s[14]}}),{c(){M(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,r){O(e,n,r),t=!0},p:ie,i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function Pe(s){let e,t,n,r,u,i,a,l,o=s[7]&&Ve(s);function f(d){s[24](d)}function b(d){s[25](d)}let c={slideStartTime:s[6].startTime,slideEndTime:s[6].endTime,currentSldieType:s[6].type,currentTime:xt,images:s[2],assets:s[5],background:s[9]};return s[6].items!==void 0&&(c.items=s[6].items),s[1]!==void 0&&(c.slideExtra=s[1]),r=new Ye({props:c}),X.push(()=>Y(r,"items",f)),X.push(()=>Y(r,"slideExtra",b)),{c(){e=E("div"),o&&o.c(),t=D(),n=E("div"),M(r.$$.fragment),this.h()},l(d){e=x(d,"DIV",{class:!0});var m=q(e);o&&o.l(m),t=y(m),n=x(m,"DIV",{class:!0});var I=q(n);L(r.$$.fragment,I),I.forEach(S),m.forEach(S),this.h()},h(){T(n,"class",a=Ee(s[7]?"main-content":"main-content-full")+" svelte-7knqxd"),T(e,"class","flex-container svelte-7knqxd")},m(d,m){B(d,e,m),o&&o.m(e,null),_(e,t),_(e,n),O(r,n,null),l=!0},p(d,m){d[7]?o?(o.p(d,m),m&128&&v(o,1)):(o=Ve(d),o.c(),v(o,1),o.m(e,t)):o&&(te(),p(o,1,1,()=>{o=null}),ne());const I={};m&64&&(I.slideStartTime=d[6].startTime),m&64&&(I.slideEndTime=d[6].endTime),m&64&&(I.currentSldieType=d[6].type),m&4&&(I.images=d[2]),m&32&&(I.assets=d[5]),!u&&m&64&&(u=!0,I.items=d[6].items,Q(()=>u=!1)),!i&&m&2&&(i=!0,I.slideExtra=d[1],Q(()=>i=!1)),r.$set(I),(!l||m&128&&a!==(a=Ee(d[7]?"main-content":"main-content-full")+" svelte-7knqxd"))&&T(n,"class",a)},i(d){l||(v(o),v(r.$$.fragment,d),l=!0)},o(d){p(o),p(r.$$.fragment,d),l=!1},d(d){d&&S(e),o&&o.d(),j(r)}}}function Ve(s){let e,t,n;return t=new pt({props:{slides:s[0],moveUp:s[17],currentSlideIndex:s[4],setCurrentSlide:s[23]}}),{c(){e=E("div"),M(t.$$.fragment),this.h()},l(r){e=x(r,"DIV",{class:!0});var u=q(e);L(t.$$.fragment,u),u.forEach(S),this.h()},h(){T(e,"class","side-panel svelte-7knqxd")},m(r,u){B(r,e,u),O(t,e,null),n=!0},p(r,u){const i={};u&1&&(i.slides=r[0]),u&16&&(i.currentSlideIndex=r[4]),u&8&&(i.setCurrentSlide=r[23]),t.$set(i)},i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){p(t.$$.fragment,r),n=!1},d(r){r&&S(e),j(t)}}}function Et(s){let e,t,n,r,u=s[6]&&qe(s),i=s[8]&&Ue(s),a=s[6]&&Pe(s);return{c(){u&&u.c(),e=D(),i&&i.c(),t=D(),a&&a.c(),n=re()},l(l){u&&u.l(l),e=y(l),i&&i.l(l),t=y(l),a&&a.l(l),n=re()},m(l,o){u&&u.m(l,o),B(l,e,o),i&&i.m(l,o),B(l,t,o),a&&a.m(l,o),B(l,n,o),r=!0},p(l,[o]){l[6]?u?(u.p(l,o),o&64&&v(u,1)):(u=qe(l),u.c(),v(u,1),u.m(e.parentNode,e)):u&&(te(),p(u,1,1,()=>{u=null}),ne()),l[8]?i?(i.p(l,o),o&256&&v(i,1)):(i=Ue(l),i.c(),v(i,1),i.m(t.parentNode,t)):i&&(te(),p(i,1,1,()=>{i=null}),ne()),l[6]?a?(a.p(l,o),o&64&&v(a,1)):(a=Pe(l),a.c(),v(a,1),a.m(n.parentNode,n)):a&&(te(),p(a,1,1,()=>{a=null}),ne())},i(l){r||(v(u),v(i),v(a),r=!0)},o(l){p(u),p(i),p(a),r=!1},d(l){l&&(S(e),S(t),S(n)),u&&u.d(l),i&&i.d(l),a&&a.d(l)}}}let xt=0;function It(s,e,t){let{slides:n}=e,{images:r=[]}=e,u={uuid:"44455764hfghyjty6",type:"background",backgroundColor:"#9cc19c",cellHeight:25,cellWidth:25,backgroundImage:"black_mat",globalAlpha:1,showGrid:!1,gridLineWidth:1,gridLineColor:"#685454"},i=null,a=0,l=null,o=null,{slideExtra:f={}}=e,b=!0,c=!1;function d(){console.log("export const presentationData = "+JSON.stringify(n))}function m(){t(4,a=i.getCurrentSlideIndex()),t(6,o=i.currentSlide)}function I(){i.next(),t(4,a=i.getCurrentSlideIndex()),t(6,o=i.currentSlide)}function C(){i.prev(),t(4,a=i.getCurrentSlideIndex()),t(6,o=i.currentSlide)}Oe(async()=>{t(3,i=new lt(n));const w=await Ge(r,"/images/");t(5,l=new Je(w)),t(3,i.currentSlide=0,i),t(4,a=i.getCurrentSlideIndex()),t(6,o=i.currentSlide)});function N(w){try{w==="Eqs"&&(w="eqs");const J=wt(w);n.push(J),t(3,i.currentSlide=n.length-1,i),t(4,a=i.getCurrentSlideIndex()),t(6,o=i.currentSlide),t(8,c=!1)}catch(J){console.error("Failed to add new slide:",J)}}function P(w){t(6,o.endTime=w,o),i.shiftTime()}function A(){debugger;i.clone(),t(0,n=i.slides),m()}function g(){i.moveUp(),t(0,n=i.slides),m()}function h(){i.del(),t(0,n=i.slides),m()}function U(w){b=w,t(7,b)}function R(w){c=w,t(8,c)}function Z(w){s.$$.not_equal(o.startTime,w)&&(o.startTime=w,t(6,o))}function G(w){s.$$.not_equal(o.endTime,w)&&(o.endTime=w,t(6,o))}const H=w=>{i.setCurrentSlide(w),m()};function me(w){s.$$.not_equal(o.items,w)&&(o.items=w,t(6,o))}function $(w){f=w,t(1,f)}return s.$$set=w=>{"slides"in w&&t(0,n=w.slides),"images"in w&&t(2,r=w.images),"slideExtra"in w&&t(1,f=w.slideExtra)},[n,f,r,i,a,l,o,b,c,u,d,m,I,C,N,P,A,g,h,U,R,Z,G,H,me,$]}class Ct extends ue{constructor(e){super(),oe(this,e,It,Et,ae,{slides:0,images:2,slideExtra:1})}}const Nt=[{uuid:"31ce5b05-a8a3-43c3-b473-cddab5b978f6",startTime:0,endTime:10,type:"canvas",version:"basic",template:"",items:[{uuid:"91ad766f-95a5-4f73-87a4-35fb9f7f6dfe",name:"text_196076e4",content:"",showAt:0,hideAt:null,_id:{$oid:"67ac30a534a981cbd55d216f"},itemExtra:{uuid:"265125d8-e902-4c73-8f6c-a022f1708f20",type:"text",x:110,y:157,text:"Chapter  1 Ex 1.1 Q 1 Part (ii) ",fontSize:60,fontFamily:"Times New Roman",color:"#d91212",globalAlpha:1}}],slideExtra:{backgroundColor:"#edece9",canvasWidth:1e3,canvasHeight:360,cellHeight:25,cellWidth:25,bgImg:"black_mat",bgGlobalAlpha:1,xFactor:0,yFactor:0,showGrid:!1,gridLineWidth:1,gridLineColor:"gray",imagesUrl:"https://taleem-media.blr1.cdn.digitaloceanspaces.com/bucket/"},_id:{$oid:"67a3822634a981cbd55d166d"}},{uuid:"6324faa3-f405-421f-8647-e04db369e13c",startTime:10,endTime:19,type:"eqs",version:"basic",template:"",items:[{uuid:"d747f5b1-8fe4-4369-b816-cd7a1b457770",name:"11cd1e6f",content:"",showAt:0,hideAt:null,itemExtra:{startTime:0,endTime:10,code:"Represent each number on number line?",type:"txt",sp:[]},_id:{$oid:"677ca6df3cc9ccd50a8d6347"}},{uuid:"e00e1f1f-ff58-4de1-9fcd-643386a3bfc7",name:"b7e6fc52",content:"",showAt:0,hideAt:null,itemExtra:{startTime:10,endTime:10,code:"(ii)-\\frac{1}{3}",type:"code",sp:[]},_id:{$oid:"677ca6df3cc9ccd50a8d6348"}},{uuid:"4f76b996-60bd-49f1-860f-073d266bd922",name:"18810793",content:"",showAt:0,hideAt:null,itemExtra:{startTime:10,endTime:10,code:"",type:"txt",sp:[]},_id:{$oid:"677ca6df3cc9ccd50a8d6349"}}],_id:{$oid:"677ca6df3cc9ccd50a8d6346"}},{uuid:"b3a1c955-6315-4b50-affa-ad508f0caa51",name:"New Slide",version:"basic",startTime:19,endTime:29,type:"canvas",template:"",items:[{uuid:"7b08023b-830e-4f82-9d9d-5ecd85e16a01",name:"f92c8acd",content:"",showAt:0,hideAt:null,itemExtra:{uuid:"62f6b81f-a106-4b04-99ac-6125e12d13f6",type:"ellipse",name:"ellipse",x:100,y:100,radiusX:50,radiusY:75,rotation:0,startAngle:0,endAngle:6.283185307179586,lineWidth:1,filled:!1,color:"red",globalAlpha:1}},{uuid:"0586114c-9cf5-4c23-83a9-a541f7d01047",name:"6f36df58",content:"",showAt:0,hideAt:null,itemExtra:{uuid:"324d883f-5b08-498a-b61c-18c14489e1f3",type:"circle",name:"circle",x:150,y:150,radius:50,rotation:0,startAngle:0,endAngle:6.283185307179586,lineWidth:1,dash:0,gap:0,filled:!0,color:"red",globalAlpha:1}}],slideExtra:{imagesUrl:"https://taleem-media.blr1.cdn.digitaloceanspaces.com/bucket/"}},{uuid:"9370c07b-7000-48d8-861e-bc85d819057a",name:"New Slide",version:"basic",startTime:29,endTime:39,type:"eqs",template:"",items:[{uuid:"d1c5a27c-b3a6-42af-a43b-eaaba2bbd3f1",name:"de0f2036",content:"",showAt:0,hideAt:null,itemExtra:{code:"salam"}}],slideExtra:{imagesUrl:"https://taleem-media.blr1.cdn.digitaloceanspaces.com/bucket/"}}];function Fe(s){let e,t,n;function r(i){s[2](i)}let u={images:s[1]};return s[0]!==void 0&&(u.slides=s[0]),e=new Ct({props:u}),X.push(()=>Y(e,"slides",r)),{c(){M(e.$$.fragment)},l(i){L(e.$$.fragment,i)},m(i,a){O(e,i,a),n=!0},p(i,a){const l={};!t&&a&1&&(t=!0,l.slides=i[0],Q(()=>t=!1)),e.$set(l)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){j(e,i)}}}function At(s){let e,t,n=s[0]&&Fe(s);return{c(){n&&n.c(),e=re()},l(r){n&&n.l(r),e=re()},m(r,u){n&&n.m(r,u),B(r,e,u),t=!0},p(r,[u]){r[0]?n?(n.p(r,u),u&1&&v(n,1)):(n=Fe(r),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(te(),p(n,1,1,()=>{n=null}),ne())},i(r){t||(v(n),t=!0)},o(r){p(n),t=!1},d(r){r&&S(e),n&&n.d(r)}}}function Dt(s,e,t){let n=null;Oe(async()=>{t(0,n=Nt)});let r=[];function u(i){n=i,t(0,n)}return[n,r,u]}class Mt extends ue{constructor(e){super(),oe(this,e,Dt,At,ae,{})}}export{Mt as component};
